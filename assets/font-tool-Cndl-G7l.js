import{r as p,b as Be,j as e,d as Me,e as Pe,R as Ie}from"./js-yaml-ARrXgJMQ.js";const Te=({onClose:K})=>{const[w,oe]=p.useState(!1),[ae,fe]=p.useState(""),[U,q]=p.useState(""),[l,ne]=p.useState(12),[g,Q]=p.useState(12),[$,ie]=p.useState(12),[I,J]=p.useState(14),[T,se]=p.useState(1),[E,re]=p.useState(0),[v,ge]=p.useState(16),[z,ue]=p.useState(2),[H,me]=p.useState(200),[N,ye]=p.useState(!0),[R,le]=p.useState(!0),[X,be]=p.useState(!0),[Y,ve]=p.useState(`The quick brown fox jumps over the lazy dog!
0123456789 @#$%^&*()_+-=[]{}|;:'".,<>?/\`~\\`),[A,je]=p.useState(2),k=p.useRef(null),O=p.useRef(null),G=p.useRef(null),[V,_]=p.useState([]),[L,we]=p.useState(!1),[u,ce]=p.useState(null),[j,Z]=p.useState([]),ee=p.useRef(null),C=Be(),Se=async t=>{const n=t.target.files?.[0];if(!n)return;oe(!1);const o=`CustomFont_${Date.now()}`;fe(o);const d=n.name.replace(/\.[^/.]+$/,"").toLowerCase().replace(/[^a-z0-9]+/g,"-");q(d);try{const r=await n.arrayBuffer(),i=new FontFace(o,r);await i.load(),document.fonts.add(i),Ce(o),oe(!0),console.log(`Font loaded: ${o}`)}catch(r){console.error("Failed to load font:",r),alert("Failed to load font file. Please try a different TTF file.")}},Ce=t=>{const o=document.createElement("canvas").getContext("2d");if(!o)return;const d=[8,10,12,14,16,18,20,24,32];let r=12,i=12;const a=["M","W","A","g","j","y","Q","p"];for(const h of d){o.font=`${h}px "${t}", monospace`,o.textBaseline="top";let x=0;for(const b of a){const S=o.measureText(b);x=Math.max(x,Math.ceil(S.width))}let s=0,c=0;for(const b of a){const S=o.measureText(b);S.actualBoundingBoxAscent!==void 0&&(s=Math.max(s,S.actualBoundingBoxAscent)),S.actualBoundingBoxDescent!==void 0&&(c=Math.max(c,S.actualBoundingBoxDescent))}const f=s+c>0?Math.ceil(s+c):h,y=(b=>b>0&&(b&b-1)===0)(f)||f%4===0||f===12;if(x>=4&&x<=48&&f>=4&&f<=48&&(r=Math.max(x,4),i=Math.max(f,4),y))break}r=Math.ceil(r/2)*2,i=Math.ceil(i/2)*2,ne(r),Q(i),ie(i),J(i),console.log(`Auto-detected: Width=${r}px, Height=${i}px, FontSize=${i}pt, LineHeight=${i}px`)},de=()=>{if(!w||!k.current)return;const t=k.current,n=t.getContext("2d");if(!n)return;n.font=`${$}px "${ae}", monospace`,n.textBaseline="top";const o=[],d=[];R?C.forEach(x=>{const s=n.measureText(x),c=Math.ceil(s.width)+2;o.push(Math.min(c,l))}):C.forEach(()=>o.push(l));const r=C.length,i=Math.ceil(r/v),a=l*v,h=g*i;if(t.width=a,t.height=h,n.clearRect(0,0,a,h),n.imageSmoothingEnabled=!1,n.font=`${$}px "${ae}", monospace`,n.textAlign="left",n.textBaseline="top",n.fillStyle="#ffffff",C.forEach((x,s)=>{const c=s%v,f=Math.floor(s/v),m=c*l,y=f*g,b=o[s],S=R?Math.floor((l-b)/2):0;n.save(),n.beginPath(),n.rect(m,y,l,g),n.clip(),n.fillText(x,m+S,y+E),n.restore()}),N){const x=n.getImageData(0,0,a,h),s=x.data;for(let c=0;c<s.length;c+=4)s[c+3]>=H?(s[c]=255,s[c+1]=255,s[c+2]=255,s[c+3]=255):(s[c]=255,s[c+1]=255,s[c+2]=255,s[c+3]=0);n.putImageData(x,0,0)}if(R){const s=n.getImageData(0,0,a,h).data;C.forEach((c,f)=>{const m=f%v,y=Math.floor(f/v),b=m*l,S=y*g;let F=l,B=0;for(let W=0;W<g;W++)for(let P=0;P<l;P++){const We=b+P,Ae=((S+W)*a+We)*4;s[Ae+3]>0&&(F=Math.min(F,P),B=Math.max(B,P))}let M,D;if(c===" ")M=l,D=b;else if(B>=F){const W=Math.max(0,F-1);M=Math.min(l-1,B+1)-W+1,D=b+W}else M=l,D=b;M=Math.min(M,l),o[f]=M,d.push({x:D,y:S,width:M,height:g})}),_(o)}else C.forEach((x,s)=>{const c=s%v,f=Math.floor(s/v),m=c*l,y=f*g;d.push({x:m,y,width:l,height:g})}),_(o);Z(d),pe()},pe=()=>{if(!k.current||!O.current)return;const t=k.current,n=O.current,o=n.getContext("2d");if(!o)return;const d=t.width*z,r=t.height*z;n.width=d,n.height=r,o.imageSmoothingEnabled=!1,o.drawImage(t,0,0,d,r),L&&j.length>0&&j.forEach((i,a)=>{o.strokeStyle=u===a?"rgba(255, 165, 0, 0.8)":"rgba(255, 255, 0, 0.4)",o.fillStyle=u===a?"rgba(255, 165, 0, 0.2)":"rgba(255, 255, 0, 0.1)",o.lineWidth=u===a?2:1;const h=i.x*z,x=i.y*z,s=i.width*z,c=i.height*z;o.fillRect(h,x,s,c),o.strokeRect(h,x,s,c)})};p.useEffect(()=>{w&&de()},[w,l,g,$,E,v,N,H,R]),p.useEffect(()=>{pe()},[z,L,u,j]);const xe=p.useCallback(()=>{if(!k.current||!G.current||!w||!Y)return;const t=k.current,n=G.current,o=n.getContext("2d");if(!o)return;const d=500,r=l+T,i=Math.floor(d/r),a=Y.split(`
`),h=[];for(const f of a){if(!f.trim()){h.push("");continue}const m=f.split(" ");let y="";for(const b of m){const S=y?`${y} ${b}`:b;S.length<=i?y=S:(y&&h.push(y),y=b)}y&&h.push(y)}const s=Math.max(...h.map(f=>f.length))*r,c=h.length*I;n.width=s*A,n.height=c*A,o.clearRect(0,0,n.width,n.height),o.imageSmoothingEnabled=!1,h.forEach((f,m)=>{let y=0;const b=m*I;for(const S of f){const F=C.indexOf(S);if(F!==-1){const B=j[F],M=B?.x??F%v*l,D=B?.y??Math.floor(F/v)*g,W=B?.width??V[F]??l,P=B?.height??g;o.drawImage(t,M,D,W,P,y*A,b*A,W*A,P*A),y+=R&&!X?W+T:r}else y+=r}})},[k,G,w,Y,A,l,g,T,I,C,v,V,j,R,X]);p.useEffect(()=>{w&&xe()},[w,Y,A,l,g,T,I,xe]);const ke=t=>{if(!L||!O.current||j.length===0)return;const o=O.current.getBoundingClientRect(),d=(t.clientX-o.left)/z,r=(t.clientY-o.top)/z;for(let i=0;i<j.length;i++){const a=j[i];if(d>=a.x&&d<a.x+a.width&&r>=a.y&&r<a.y+a.height){ce(i),he(i);return}}ce(null)},he=t=>{if(!k.current||!ee.current)return;const n=k.current,o=ee.current,d=o.getContext("2d");if(!d)return;const r=j[t],i=4,a=r.x,h=r.y,x=r.width,s=r.height;o.width=x*i,o.height=s*i,d.imageSmoothingEnabled=!1,d.clearRect(0,0,o.width,o.height),d.drawImage(n,a,h,x,s,0,0,x*i,s*i)};p.useEffect(()=>{u!==null&&j.length>0&&he(u)},[u,j,l,g]);const te=(t,n)=>{if(u===null)return;const o=[...j];if(o[u]={...o[u],[t]:n},Z(o),t==="width"){const d=[...V];d[u]=n,_(d)}},ze=async()=>{if(!k.current)return;const t=k.current,n=U?`${U}-atlas.png`:"font-atlas.png";t.toBlob(async o=>{if(!o)return;if("showSaveFilePicker"in window)try{const a=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"PNG Image",accept:{"image/png":[".png"]}}]})).createWritable();await a.write(o),await a.close();return}catch(i){if(i.name==="AbortError")return}const d=URL.createObjectURL(o),r=document.createElement("a");r.href=d,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(d)})},Re=async()=>{const t=U||"font-definition",n=C.map((a,h)=>{const x=j[h],s=x?.x??h%v*l,c=x?.y??Math.floor(h/v)*g,f=x?.width??V[h]??l;let m=a;return a==='"'&&(m='\\"'),a==="\\"&&(m="\\\\"),`      - { char: "${m}", x: ${s}, y: ${c}, width: ${f} }`}).join(`
`),o=`# Font definition for ${t}
# Generated from font atlas generator
# AA Threshold: ${N?H:"disabled"}

fonts:
  - id: "${t}"
    atlasPath: "/fonts/${t}-atlas.png"
    charHeight: ${g}
    lineHeight: ${I}
    charSpacing: ${T}
    baselineOffset: ${E}
    fallbackChar: "?"
    tags: ["pixel", "game"${R?', "variable-width"':""}]
    characters:
${n}
`,d=new Blob([o],{type:"text/yaml"});if("showSaveFilePicker"in window)try{const h=await(await window.showSaveFilePicker({suggestedName:`${t}.yaml`,types:[{description:"YAML File",accept:{"text/yaml":[".yaml",".yml"]}}]})).createWritable();await h.write(d),await h.close();return}catch(a){if(a.name==="AbortError")return}const r=URL.createObjectURL(d),i=document.createElement("a");i.href=r,i.download=`${t}.yaml`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},Fe=t=>{const n=t.target.files?.[0];if(!n)return;const o=new FileReader;o.onload=d=>{try{const r=d.target?.result,i=Me.load(r);if(!i.fonts||!i.fonts[0]){alert("Invalid YAML format: No font definition found");return}const a=i.fonts[0];a.id&&q(a.id),a.charHeight&&Q(a.charHeight),a.lineHeight&&J(a.lineHeight),a.charSpacing!==void 0&&se(a.charSpacing),a.baselineOffset!==void 0&&re(a.baselineOffset);const h=a.tags&&a.tags.includes("variable-width");if(le(h),a.characters&&Array.isArray(a.characters)){const x=[],s=[],c=new Map;a.characters.forEach(f=>{c.set(f.char,f)}),C.forEach(f=>{const m=c.get(f);m?(x.push(m.width||l),s.push({x:m.x||0,y:m.y||0,width:m.width||l,height:a.charHeight||g})):(x.push(l),s.push({x:0,y:0,width:l,height:g}))}),_(x),Z(s)}alert(`Successfully imported font definition: ${a.id}`)}catch(r){console.error("Failed to parse YAML:",r),alert("Failed to parse YAML file. Please check the file format.")}},o.readAsText(n),t.target.value=""};return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.95)",color:"#fff",fontFamily:"monospace",fontSize:"12px",zIndex:3e3,display:"flex",flexDirection:"column",overflow:"hidden",margin:0,padding:0},onKeyDown:t=>t.stopPropagation(),onKeyUp:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),onMouseUp:t=>t.stopPropagation(),onClick:t=>t.stopPropagation(),onWheel:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 20px 16px 20px",borderBottom:"1px solid #666"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Font Atlas Generator"}),e.jsx("button",{onClick:K,style:{background:"transparent",border:"none",color:"#fff",fontSize:"20px",fontWeight:"bold",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:t=>t.currentTarget.style.opacity="1",onMouseLeave:t=>t.currentTarget.style.opacity="0.7",children:"×"})]}),e.jsxs("div",{style:{display:"flex",gap:"20px",flex:1,minHeight:0,padding:"20px"},children:[e.jsxs("div",{style:{flex:"0 0 400px",display:"flex",flexDirection:"column",gap:"12px",overflow:"auto",paddingRight:"10px"},children:[e.jsxs("div",{style:{padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"13px"},children:"1. Upload TTF Font"}),e.jsx("input",{type:"file",accept:".ttf,.otf",onChange:Se,style:{width:"100%",padding:"8px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #666",borderRadius:"4px",color:"#fff",fontSize:"11px",cursor:"pointer"}}),w&&e.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#4CAF50"},children:"✓ Font loaded successfully"})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"13px"},children:"2. Configure Font"}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:"Font ID"}),e.jsx("input",{type:"text",value:U,onChange:t=>q(t.target.value),style:{width:"100%",padding:"6px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #666",borderRadius:"3px",color:"#fff",fontSize:"11px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Char Width (px): ",l]}),e.jsx("input",{type:"range",min:"4",max:"32",value:l,onChange:t=>ne(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Char Height (px): ",g]}),e.jsx("input",{type:"range",min:"4",max:"32",value:g,onChange:t=>Q(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Font Size (px): ",$]}),e.jsx("input",{type:"range",min:"4",max:"32",value:$,onChange:t=>ie(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Baseline Offset (px): ",E]}),e.jsx("input",{type:"range",min:"0",max:g,value:E,onChange:t=>re(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Line Height (px): ",I]}),e.jsx("input",{type:"range",min:g,max:g+10,value:I,onChange:t=>J(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Char Spacing (px): ",T]}),e.jsx("input",{type:"range",min:"0",max:"8",value:T,onChange:t=>se(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Chars Per Row: ",v]}),e.jsx("input",{type:"range",min:"8",max:"32",value:v,onChange:t=>ge(Number(t.target.value)),style:{width:"100%"}})]}),e.jsxs("div",{style:{marginBottom:"8px",marginTop:"16px",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:R,onChange:t=>le(t.target.checked),style:{cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"11px",color:"#aaa"},children:"Variable Width (Auto-detect)"})]}),R&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px",marginLeft:"24px"},children:"Each character centered in cell"}),e.jsx("button",{onClick:de,style:{marginTop:"6px",marginLeft:"24px",padding:"4px 8px",background:"rgba(33, 150, 243, 0.2)",border:"1px solid rgba(33, 150, 243, 0.4)",borderRadius:"3px",color:"#fff",fontSize:"10px",cursor:"pointer",fontFamily:"monospace"},children:"Regenerate Widths"})]})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:L,onChange:t=>we(t.target.checked),style:{cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"11px",color:"#aaa"},children:"Show Character Grid"})]}),L&&e.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px",marginLeft:"24px"},children:"Click characters to edit properties"})]}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:N,onChange:t=>ye(t.target.checked),style:{cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"11px",color:"#aaa"},children:"Pixel-Perfect (Remove AA)"})]})}),N&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["AA Threshold: ",H]}),e.jsx("input",{type:"range",min:"64",max:"255",value:H,onChange:t=>me(Number(t.target.value)),style:{width:"100%"}}),e.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px"},children:"Lower = thinner characters"})]})]}),e.jsxs("div",{style:{padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",fontSize:"13px"},children:"3. Import/Export"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("label",{htmlFor:"yaml-import",style:{padding:"8px",background:"rgba(156, 39, 176, 0.3)",border:"1px solid rgba(156, 39, 176, 0.6)",borderRadius:"4px",color:"#fff",fontSize:"11px",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold",textAlign:"center",display:"block"},children:["Import YAML Definition",e.jsx("input",{id:"yaml-import",type:"file",accept:".yaml,.yml",onChange:Fe,style:{display:"none"}})]}),e.jsx("button",{onClick:ze,style:{padding:"8px",background:"rgba(33, 150, 243, 0.3)",border:"1px solid rgba(33, 150, 243, 0.6)",borderRadius:"4px",color:"#fff",fontSize:"11px",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold"},children:"Download Atlas PNG"}),e.jsx("button",{onClick:Re,style:{padding:"8px",background:"rgba(76, 175, 80, 0.3)",border:"1px solid rgba(76, 175, 80, 0.6)",borderRadius:"4px",color:"#fff",fontSize:"11px",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold"},children:"Download YAML"})]})]}),e.jsxs("div",{style:{padding:"12px",background:"rgba(255, 152, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 152, 0, 0.3)",fontSize:"10px",lineHeight:"1.5",color:"#aaa",wordWrap:"break-word",overflowWrap:"break-word"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",color:"#ff9800"},children:"Instructions:"}),e.jsx("div",{style:{wordWrap:"break-word"},children:"1. Upload a TTF/OTF font file"}),e.jsx("div",{style:{wordWrap:"break-word"},children:"2. Adjust parameters to fit characters in cells"}),e.jsx("div",{style:{wordWrap:"break-word"},children:"3. Download both PNG atlas and YAML"}),e.jsx("div",{style:{wordWrap:"break-word"},children:"4. Place PNG in /public/fonts/"}),e.jsx("div",{style:{wordWrap:"break-word"},children:"5. Load YAML in your game"})]})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,overflow:"auto",background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"20px",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"13px"},children:"Atlas Preview"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",color:"#aaa"},children:"Scale:"}),e.jsxs("select",{value:z,onChange:t=>ue(Number(t.target.value)),style:{padding:"4px 8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid #666",borderRadius:"4px",color:"#fff",fontFamily:"monospace",fontSize:"11px",cursor:"pointer"},children:[e.jsx("option",{value:"1",children:"1x"}),e.jsx("option",{value:"2",children:"2x"}),e.jsx("option",{value:"3",children:"3x"}),e.jsx("option",{value:"4",children:"4x"}),e.jsx("option",{value:"6",children:"6x"}),e.jsx("option",{value:"8",children:"8x"})]})]})]}),e.jsx("div",{style:{maxHeight:"400px",overflow:"auto",background:"rgba(0, 0, 0, 0.5)",borderRadius:"4px",padding:"10px"},children:w?e.jsx("canvas",{ref:O,onClick:ke,style:{border:"1px solid rgba(255, 255, 255, 0.2)",imageRendering:"pixelated",display:"block",cursor:L?"pointer":"default"}}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#666",fontSize:"14px"},children:"Upload a font to generate atlas"})}),w&&(()=>{const t=Math.ceil(C.length/v),n=l*v,o=g*t;return e.jsxs("div",{style:{fontSize:"11px",color:"#aaa"},children:[e.jsxs("div",{children:["Atlas Size: ",n," × ",o," px"]}),e.jsxs("div",{children:["Grid: ",v," cols × ",t," rows"]}),e.jsxs("div",{children:["Characters: ",C.length," (ASCII 32-126)"]})]})})()]}),w&&L&&u!==null&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingTop:"20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"13px"},children:['Character Editor: "',C[u],'" (#',u,", ASCII ",C[u].charCodeAt(0),")"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",color:"#aaa"},children:"Preview (4x scale):"}),e.jsx("div",{style:{background:"rgba(0, 0, 0, 0.5)",borderRadius:"4px",padding:"10px",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("canvas",{ref:ee,style:{border:"1px solid rgba(255, 255, 255, 0.2)",imageRendering:"pixelated"}})})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["X: ",j[u]?.x??0]}),e.jsx("input",{type:"number",value:j[u]?.x??0,onChange:t=>te("x",Number(t.target.value)),style:{width:"80px",padding:"6px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #666",borderRadius:"3px",color:"#fff",fontSize:"11px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Y: ",j[u]?.y??0]}),e.jsx("input",{type:"number",value:j[u]?.y??0,onChange:t=>te("y",Number(t.target.value)),style:{width:"80px",padding:"6px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #666",borderRadius:"3px",color:"#fff",fontSize:"11px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"11px",color:"#aaa"},children:["Width: ",j[u]?.width??l]}),e.jsx("input",{type:"number",min:"1",max:l,value:j[u]?.width??l,onChange:t=>te("width",Number(t.target.value)),style:{width:"80px",padding:"6px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid #666",borderRadius:"3px",color:"#fff",fontSize:"11px",fontFamily:"monospace"}})]})]}),e.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px"},children:"Tip: Adjust these values to fine-tune individual character positioning and dimensions"})]}),w&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"13px"},children:"Text Preview"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",color:"#aaa"},children:"Scale:"}),e.jsxs("select",{value:A,onChange:t=>je(Number(t.target.value)),style:{padding:"4px 8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid #666",borderRadius:"4px",color:"#fff",fontFamily:"monospace",fontSize:"11px",cursor:"pointer"},children:[e.jsx("option",{value:"1",children:"1x"}),e.jsx("option",{value:"2",children:"2x"}),e.jsx("option",{value:"3",children:"3x"}),e.jsx("option",{value:"4",children:"4x"})]})]})]}),e.jsx("textarea",{value:Y,onChange:t=>ve(t.target.value),placeholder:"Enter text to preview...",style:{width:"100%",minHeight:"60px",padding:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid #666",borderRadius:"4px",color:"#fff",fontFamily:"monospace",fontSize:"12px",resize:"vertical"}}),R&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:X,onChange:t=>be(t.target.checked),style:{cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"11px",color:"#aaa"},children:"Render Monospaced"})]}),e.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"4px",marginLeft:"24px"},children:X?"Fixed spacing (default)":"Proportional spacing"})]}),e.jsx("div",{style:{background:"rgba(0, 0, 0, 0.5)",borderRadius:"4px",padding:"12px",overflow:"auto",maxHeight:"200px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsx("canvas",{ref:G,style:{imageRendering:"pixelated",display:"block"}})})]})]})]}),e.jsx("canvas",{ref:k,style:{display:"none"}})]})};function Le(){const[K,w]=p.useState(!0);return K?e.jsx(Te,{onClose:()=>w(!1)}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#1a1a1a",color:"#fff",fontFamily:"monospace"},children:e.jsx("button",{onClick:()=>w(!0),style:{padding:"20px 40px",background:"rgba(76, 175, 80, 0.3)",border:"2px solid rgba(76, 175, 80, 0.6)",borderRadius:"8px",color:"#fff",fontSize:"18px",cursor:"pointer",fontFamily:"monospace",fontWeight:"bold"},children:"Open Font Atlas Generator"})})}Pe.createRoot(document.getElementById("root")).render(e.jsx(Ie.StrictMode,{children:e.jsx(Le,{})}));
